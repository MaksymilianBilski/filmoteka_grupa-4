var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},s=e.parcelRequire3e4d;null==s&&((s=function(e){if(e in t)return t[e].exports;if(e in n){var s=n[e];delete n[e];var i={id:e,exports:{}};return t[e]=i,s.call(i.exports,i,i.exports),i.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){n[e]=t},e.parcelRequire3e4d=s),s("2py12");var i=s("eWCmQ"),l=s("2py12");s("6mpqm"),s("luWlP");l=s("2py12");var a=s("dCvm9"),o=s("jdSc9");l.API_KEY;const r=document.getElementById("form-input");let d,c,u=`https://api.themoviedb.org/3/search/movie?api_key=${l.API_KEY}&query=`;const g=document.querySelector(".header-form-error"),p=document.getElementById("search-form");async function y(e){c=!0,g.innerHTML="";const t=new(0,a.Spinner)(o.opts).spin(l.getMovie);l.getMovie.children.length>0&&(l.getMovie.innerHTML="");let n=r.value.toLowerCase();if(""===n&&((0,l.fetchMovies)(l.API_KEY),_.innerHTML="",H(l.totalPages),P(),c=!1),n&&""!==n)return fetch(u+n+e).then((e=>e.json())).then((e=>{0===e.results.length&&(error=g.innerText="Search result not successful. Enter the correct movie name and try again.",setTimeout((()=>{g.innerText=""}),3e3)),(0,l.start)(e),k(),d=e.total_pages})).catch((e=>{console.log(e)})),n="",void t.stop()}let m;null!==p&&p.addEventListener("submit",(e=>{e.preventDefault(),y("")}));let b,f,h,v=1,L=document.getElementById("movie-list");const _=document.querySelector(".pagination"),x=document.querySelector(".pagination-box"),w=document.querySelector(".start-page-dots"),T=document.querySelector(".arrow-left"),E=document.querySelector(".arrow-right"),M=document.querySelector(".svg-right"),S=document.querySelector(".svg-left");function k(){setTimeout((()=>{if(!0===c&&(Number(l.totalPages)>Number(_.children[6].textContent)&&(_.children[6].textContent=l.totalPages,A()),v>d&&(m=1,A()),f.textContent=d,d<10&&(C(),d<6)))for(let e=d;e<=_.children.length;e++){if(void 0===_.children[e])return;_.children[e].style.display="none",T.style.display="none",E.style.display="none"}!function(){for(let e=_.children.length;e<=d;e++)_.children.length<d&&(P(),E.style.display="block",T.style.display="block",b.style.display="flex",w.style.display="flex")}()}),10*l.timeDifference)}function C(){if(w.style.display="none",f.style.display="none",b.style.display="none",void 0!==h&&(h.style.display="none"),v>=4){if(void 0===_.children[0])return;"1"===_.children[0].textContent&&(_.children[0].style.display="none")}v<=l.totalPages-4&&Number(_.children[_.children.length-1].textContent)===l.totalPages&&(_.children[_.children.length-1].style.display="none"),window.innerWidth>767&&(w.style.display="flex",f.style.display="block",b.style.display="flex",void 0!==h&&(h.style.display="flex"))}document.addEventListener("load",(()=>{window.innerWidth<=767&&C()})),window.addEventListener("resize",C),window.addEventListener("scroll",(function(e){if(void 0===e.path)return;const t=e.path[1].pageYOffset;window.sessionStorage.setItem("SCROLLPOS",t)})),window.addEventListener("DOMContentLoaded",(()=>{const e=sessionStorage.getItem("SCROLLPOS")||0;l.timeDifference>=1e3&&setTimeout((()=>{window.scroll({top:e,x:0})}),l.timeDifference/10),l.timeDifference<1e3&&setTimeout((()=>{window.scroll({top:e,x:0})}),l.timeDifference)})),w.style.display="flex",w.style.height="40px",w.style.alignItems="center",_.style.display="flex",_.style.height="40px",x.style.display="flex",x.style.alignItems="center",T.style.visibility="hidden",T.style.backgroundColor="transparent",T.style.border="none",T.style.borderRadius="5px",T.style.width="40px",T.style.height="40px",E.style.marginLeft="10px",E.style.border="none",E.style.borderRadius="5px",E.style.backgroundColor="transparent",E.style.width="40px",E.style.height="40px",S.addEventListener("mouseout",(e=>{e.target.style.transition="all 150ms",e.target.style.fill="black",T.style.backgroundColor="transparent"})),S.addEventListener("mouseover",(e=>{e.target.style.transition="all 150ms",e.target.style.fill="#ff6b08",e.target.style.cursor="pointer",T.style.backgroundColor="#F7F7F7"})),M.addEventListener("mouseout",(e=>{e.target.style.transition="all 150ms",e.target.style.fill="black",E.style.backgroundColor="transparent"})),M.addEventListener("mouseover",(e=>{e.target.style.transition="all 150ms",e.target.style.fill="#ff6b08",e.target.style.cursor="pointer",E.style.backgroundColor="#F7F7F7"})),S.addEventListener("click",(()=>{k(),A()})),M.addEventListener("click",(()=>{k(),q(),window.innerWidth<=767&&C()}));function P(){for(let e=0;e<=_.children.length-1;e++)_.children[e].style.display="block",_.children[e].style.marginLeft="2px",_.children[e].style.backgroundColor="transparent",_.children[e].style.border="none",_.children[e].style.cursor="pointer",_.children[e].style.width="40px",_.children[e].style.height="40px","..."===_.children[e].textContent&&(_.children[e].style.cursor="default",_.children[e].style.width="16px",_.children[e].style.height="40px",_.children[e].style.display="flex",_.children[e].style.alignItems="center"),_.children[e].classList.contains("end-dots")||_.children[e].classList.contains("begining-dots")||(_.children[e].addEventListener("mouseover",(e=>{e.target.style.transition="all 250ms",e.target.style.backgroundColor="#ff6b08",e.target.style.borderRadius="5px",e.target.style.color="#FFFFFF"})),_.children[e].addEventListener("mouseout",(e=>{e.target.style.backgroundColor="transparent",e.target.style.borderRadius="0px",e.target.style.color="#000000"}))),_.children[e].classList.contains("end-dots")&&(_.children[e].style.marginLeft="4px",_.children[e].style.marginRight="4px",_.children[e].style.border="none",window.innerWidth<=767&&C()),_.children[e].addEventListener("click",D),w.addEventListener("click",D)}function H(e){_.insertAdjacentHTML("beforeend",'<span class="end-dots">...</span>'),_.insertAdjacentHTML("beforeend",`<button class="last-page">${e}</button>`),f=document.querySelector(".last-page");for(let e=5;e>=1;e--)_.insertAdjacentHTML("afterbegin",`<button class="pagination-button" style="margin-left:2px;">${e}</button>`);f=document.querySelector(".last-page"),b=document.querySelector(".end-dots")}function q(){v=m=l.totalPages,_.innerHTML="",w.innerHTML="";for(let e=l.totalPages-4;e<=l.totalPages;e++)_.insertAdjacentHTML("beforeend",`<button class="pagination-button">${e}</button>`);E.style.transition="all 250ms",E.style.visibility="hidden",T.style.transition="all 250ms",T.style.visibility="visible",_.insertAdjacentHTML("afterbegin",'<span class="begining-dots" style="cursor: default;height: 100%; width: 16px; display: flex; align-items:center;justify-content: center; margin: 0;">...</span>'),_.insertAdjacentHTML("afterbegin",'<button class="pagination-button">1</button>'),h=document.querySelector(".begining-dots"),P(),window.innerWidth<=767&&C()}async function A(){m=v=1,_.innerHTML="",w.innerHTML="";for(let e=5;e>=1;e--)_.insertAdjacentHTML("afterbegin",`<button class="pagination-button">${e}</button>`);E.style.transition="all 250ms",E.style.visibility="visible",T.style.transition="all 250ms",T.style.visibility="hidden",_.insertAdjacentHTML("beforeend",'<span class="end-dots">...</span>'),_.insertAdjacentHTML("beforeend",`<button class="pagination-button last-page"  style="background-color: transparent; border: none;">${l.totalPages}</button>`),P(),b=document.querySelector(".end-dots"),f=document.querySelector(".last-page"),window.innerWidth<=767&&C()}function D(e){if(e.target.classList.contains("begining-dots")&&i.Notify.info(v-1+" pages backward"),"SPAN"!==e.target.nodeName&&!e.target.classList.contains(".beginig-dots")){m=v=e.target.textContent,_.innerHTML="",w.innerHTML="",v>=4&&v<=l.totalPages-4&&(T.style.visibility="visible",E.style.visibility="visible",w.innerHTML='<span class="begining-dots" style="cursor: default;height: 100%; width: 16px; display: flex; align-items:center;justify-content: center;  margin: 0;">...</span>',w.insertAdjacentHTML("afterbegin",'<button class="pagination-button" style="cursor: pointer; height: 40px; width: 40px;">1</button>'),_.insertAdjacentHTML("afterbegin",`<button class="pagination-button">${l.totalPages}</button>`),_.insertAdjacentHTML("afterbegin",'<span class="end-dots">...</span>'),b=document.querySelector(".end-dots")),v<=4&&(w.innerHTML=""),v<=3&&(T.style.transition="all 250ms",T.style.visibility="hidden"),v>=l.totalPages-3&&(E.style.transition="all 250ms",E.style.visibility="hidden",window.innerWidth,C());for(let t=Number(v)+2;t>=Number(v)-2;t--){if(Number(v)<=3)return A(),m=v=e.currentTarget.textContent;if(Number(v)>=l.totalPages-3)return q(),m=v=e.currentTarget.textContent;_.insertAdjacentHTML("afterbegin",`<button class="pagination-button">${t}</button>`),w.children.length>=1&&(w.children[0].style.backgroundColor="transparent",w.children[0].style.border="none",w.children[0].addEventListener("mouseover",(e=>{e.target.style.transition="all 250ms",e.target.style.backgroundColor="#ff6b08",e.target.style.borderRadius="4px"})),w.children[0].addEventListener("mouseout",(e=>{e.target.style.backgroundColor="transparent",e.target.style.borderRadius="0px"})),w.children[1].style.border="none",w.children[1].style.backgroundColor="transparent")}}}l.timeDifference>=1e3?setTimeout((()=>{H(l.totalPages),P()}),l.timeDifference/10):l.timeDifference<1e3&&setTimeout((()=>{H(l.totalPages),P()}),l.timeDifference),_.addEventListener("click",(function(e){if("DIV"!==e.target.nodeName){if("SPAN"===e.target.nodeName&&!e.target.classList.contains("begining-dots"))return i.Notify.info(l.totalPages-v+" pages left");if("SPAN"!==e.target.nodeName&&_.children.length>0){if(!0===c)return y(`&page=${m}`),k(),void P();L.innerHTML="",l.fetchMovies(l.API_KEY+`&page=${m}`),P();const e=sessionStorage.getItem("SCROLLPOS");l.timeDifference>=1e3&&setTimeout((()=>{window.scroll({top:e,x:0,behavior:"smooth"})}),l.timeDifference/10),l.timeDifference<1e3&&setTimeout((()=>{window.scroll({top:e,x:0,behavior:"smooth"})}),10*l.timeDifference)}}})),s("jdSc9");l=s("2py12"),a=s("dCvm9"),o=s("jdSc9");var N=s("gFm7s");const j=document.querySelector("[data-modal]");l.getMovie.addEventListener("click",(e=>{const t=new(0,a.Spinner)(o.opts).spin(l.getMovie);if("IMG"!==e.target.tagName)return void t.stop();const n=e.target.parentNode.parentNode.dataset.film;document.querySelector(`[data-film="${n}"]`);(0,l.fetchDetails)(n,l.API_KEY).then((e=>{let n="";const s=e.popularity;n=e.genres.map((e=>e.name)).join(", "),j.innerHTML="";let i=`\n    <div class="modal">\n      <button type="button" class="modal__close-btn" data-modal-close>&#10005</button>\n      <div class="modal__img">\n        <img class="modal__img-picture"\n          src=https://image.tmdb.org/t/p/w500/${e.poster_path||e.poster_path}\n          alt="obraz"/>\n      </div>\n      <div class="modal__content">\n        <h2 class="modal__head"></h2>\n        <ul class="modal__list">\n          <li class="modal__item">\n            <span class="modal__votes modal__parameters">Vote / Votes</span>\n            <div class="modal_wrapper">\n              <span class="modal__rating">${e.vote_average.toFixed(1)}</span> /\n              <span class="modal__votes-number">${e.vote_count}</span>\n            </div>\n          </li>\n          <li class="modal__item">\n            <span class="modal__popularity modal__parameters">Popularity</span>\n            <span class="modal__popularity-total">${s.toFixed(1)}</span>\n          </li>\n          <li class="modal__item">\n            <span class="modal__title modal__parameters">Original Title</span>\n            <span class="modal__title-original">${e.original_title}</span>\n          </li>\n          <li class="modal__item">\n            <span class="modal__genre modal__parameters">Genre</span>\n            <span class="modal__genre-description">${n}</span>\n          </li>\n        </ul>\n  \n        <p class="modal__about">About</p>\n        <p class="modal__text">${e.overview}</p>\n  \n        <div class="modal__button-container">\n          <button class="modal__button-watched modal__buttons" type="button">\n            ADD TO WATCHED\n          </button>\n          <button class="modal__button-queue modal__buttons" type="button">\n            ADD TO QUEUE\n          </button>\n        </div>\n        </div>\n      </div>`;j.innerHTML+=i,j.classList.toggle("is-hidden"),t.stop(),(0,N.addToWatched)(e),(0,N.addToQueue)(e);document.querySelector("[data-modal-close]").addEventListener("click",(()=>{j.classList.add("is-hidden")})),document.addEventListener("keydown",(e=>{"Escape"===e.key&&j.classList.add("is-hidden")}))})).catch((e=>console.log(e)))})),s("gFm7s");const I=document.getElementById("btn-watched"),$=document.getElementById("btn-queue");null!==I&&I.addEventListener("click",($.classList.replace("btn-orange","btn-white"),$.classList.remove("btn-active"),I.classList.replace("btn-white","btn-orange"),void I.classList.add("btn-active"))),null!==$&&$.addEventListener("click",($.classList.replace("btn-orange","btn-white"),$.classList.remove("btn-active"),I.classList.replace("btn-white","btn-orange"),void I.classList.add("btn-active"))),s("6mpqm");
//# sourceMappingURL=index.4e31bd3a.js.map
